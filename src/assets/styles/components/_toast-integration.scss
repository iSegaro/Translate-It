// Toast Integration Styles - Vue Sonner Integration
// Modern CSS Architecture (2025) - Zero !important Policy
// Centralized styles for toast integration with Select Element mode

@use '../base/variables' as *;

/* ==========================================================================
   Toast Integration - Vue Sonner Compatibility (Shadow DOM)
   ========================================================================== */

// CSS custom properties for toast styling consistency
:root {
  --toast-cursor: auto;
  --toast-z-index: #{$z-overlay};
}

// Vue Sonner toast element cursor and interaction overrides
// High specificity without !important
[data-sonner-toaster][data-sonner-toaster],
[data-sonner-toast][data-sonner-toast],
.sonner-toaster.sonner-toaster,
.sonner-toast.sonner-toast,
[data-testid="toaster"][data-testid="toaster"],
li[data-sonner-toast][data-sonner-toast],
div[data-sonner-toast][data-sonner-toast] {
  cursor: var(--toast-cursor);
  pointer-events: auto;
  contain: layout style;
  max-width: 356px;
  min-width: 280px;

  // Apply to all child elements
  * {
    cursor: var(--toast-cursor);
    pointer-events: auto;
  }
}

// Content app container cursor protection (Shadow DOM)
.ti-content-app-container {
  cursor: var(--toast-cursor);
  contain: layout style;

  * {
    cursor: var(--toast-cursor);
  }
}

/* ==========================================================================
   Main DOM Toast Integration (Critical for select-element mode)
   ========================================================================== */

// Toast elements exception during Select Element mode
// Ensure toasts remain interactive when crosshair cursor is active
html[data-translate-it-select-mode="true"] {
  [data-sonner-toaster][data-sonner-toaster],
  [data-sonner-toast][data-sonner-toast],
  .sonner-toaster.sonner-toaster,
  .sonner-toast.sonner-toast,
  .content-app-container.content-app-container {
    cursor: var(--toast-cursor);
    pointer-events: auto;
    position: relative;
    z-index: var(--toast-z-index);
    contain: layout style;

    // Ensure all child elements are interactive
    * {
      cursor: var(--toast-cursor);
      pointer-events: auto;
    }
  }
}

/* ==========================================================================
   Toast Content Layout - Select Element Notifications
   ========================================================================== */

// Vue Sonner toast layout improvements for action buttons
[data-sonner-toast] {
  // Ensure proper height and prevent overflow issues
  min-height: auto;
  height: auto;
  max-height: none;
  max-width: 320px;
  min-width: 280px;
  overflow: hidden;

  // CRITICAL: Make the toast itself a flex container for proper RTL/LTR icon spacing
  // This ensures the icon (div[data-icon]) and content (div[data-content])
  // are properly spaced with gap in both LTR and RTL
  display: flex !important;
  align-items: flex-start !important;
  justify-content: flex-start !important;
  gap: 12px !important;

  // CRITICAL: Icon alignment fix for RTL - ensure icon is properly aligned with text
  > [data-icon] {
    flex-shrink: 0;
    align-self: flex-start;
  }

  // Direct child content container
  > div[data-content] {
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    width: 100%;
    overflow: hidden;

    // Text content (title/description) container
    > div {
      flex: 1;
      /* text-align and direction removed to allow inline styles to work */
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow-wrap: break-word;
      line-height: 1.4;
      align-self: flex-start;
      overflow: hidden;
      word-break: break-word;
      hyphens: auto;
    }

    // Title specific styling
    [data-title] {
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow-wrap: break-word;
      line-height: 1.4;
      display: block;
      overflow: hidden;
      word-break: break-word;
      hyphens: auto;
    }

    // Description specific styling
    [data-description] {
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow-wrap: break-word;
      line-height: 1.4;
      display: block;
      overflow: hidden;
      word-break: break-word;
      hyphens: auto;
    }
  }

  // Action button styling
  [data-button],
  > button {
    flex-shrink: 0;
    // Use logical property for RTL/LTR support - pushes button to the "end" in both directions
    margin-inline-start: auto;
    white-space: nowrap;
    align-self: flex-start;
  }
}

/* ==========================================================================
   RTL/LTR Toast Direction Support
   ========================================================================== */

// Direction is now applied via inline styles (style option in toastOptions)
// Direction is set based on extension locale (IsRTL from getTranslationString, cached on first use)
// No className-based rules needed